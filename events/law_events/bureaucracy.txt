namespace = bureaucracy
# Stall Event - Red Tape
bureaucracy.1 = {
	type = country_event
	title = bureaucracy.1.t
	desc = bureaucracy.1.d
	flavor = bureaucracy.1.f
	category = enactment
	event_image = {
		video = "africa_leader_arguing"
	}
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	duration = 3
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		OR = {
			is_enacting_law = law_type:law_hereditary_bureaucrats
			is_enacting_law = law_type:law_appointed_bureaucrats
			is_enacting_law = law_type:law_elected_bureaucrats
		}
		NOR = {
			has_modifier = red_tape_reduced
			has_modifier = red_tape
		}
	}
	immediate = {
		currently_enacting_law = {
			save_scope_as = current_law_scope
		}
		if = {
			limit = {
				has_law = law_type:law_hereditary_bureaucrats
			}
			ig:ig_landowners = {
				save_scope_as = bureaucrat_class
			}
		}
		if = {
			limit = {
				has_law = law_type:law_appointed_bureaucrats
			}
			ig:ig_intelligentsia = {
				save_scope_as = bureaucrat_class
			}
		}
		if = {
			limit = {
				has_law = law_type:law_elected_bureaucrats
			}
			ig:ig_petty_bourgeoisie = {
				save_scope_as = bureaucrat_class
			}
		}
		# Added by Babylon discord
		# Option 1
		discord_impact_load = {
			OPTION = 1
			VALUE = 0
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 1
			CHANCE = -10
			IG = scope:bureaucrat_class
		}
		discord_impact_modifier_approval_x_ig = {
			OPTION = 2
			APPROVAL_ADD = 2 # Here I convert a +10% pol str. to roughly 2 approval points
			IG = scope:bureaucrat_class
		}
		# Option 2
		discord_impact_load = {
			OPTION = 2
			VALUE = 0
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 2
			CHANCE = -15
			IG = scope:bureaucrat_class
		}
		# Option 3
		discord_impact_load = {
			OPTION = 3
			VALUE = 0
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 3
			CHANCE = -10
			IG = scope:bureaucrat_class
		}
		# Option 4
		discord_impact_load = {
			OPTION = 4
			VALUE = 0
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 3
			CHANCE = -10 # Actually +10% time, but I convert it to -10% chance
			IG = scope:bureaucrat_class
		}
		scope:current_law_scope = {
			# Option 4 also have a +5% chance, which I grab in favour of the new bureaucrat class
			if = {
				limit = {
					THIS = law_type:law_hereditary_bureaucrats
				}
				ig:ig_landowners = {
					save_scope_as = new_bureaucrat_class
				}
			}
			else_if = {
				limit = {
					THIS = law_type:law_appointed_bureaucrats
				}
				ig:ig_intelligentsia = {
					save_scope_as = new_bureaucrat_class
				}
			}
			else_if = {
				limit = {
					THIS = law_type:law_elected_bureaucrats
				}
				ig:ig_petty_bourgeoisie = {
					save_scope_as = new_bureaucrat_class
				}
			}
			discord_impact_modifier_enactment_chance_x_ig = {
				OPTION = 4
				CHANCE = 5
				IG = scope:new_bureaucrat_class
			}
		}
		# Exit Babylon Discord added
	}
	cancellation_trigger = {
		NOT = {
			currently_enacting_law = scope:current_law_scope
		}
	}
	option = {
		# promise job retention
		name = bureaucracy.1.a
		default_option = yes
		# lose 10% success chance
		add_enactment_modifier = {
			name = red_tape_reduced
		}
		# 10% polstr
		scope:bureaucrat_class = {
			add_modifier = {
				name = red_tape_jobs
				months = normal_modifier_time
			}
		}
		discord_impact_execute = {
			OPTION = 1
		}
	}
	option = {
		# get back to work
		name = bureaucracy.1.b
		trigger = {
			NOT = {
				has_law = law_type:law_secret_police
			}
		}
		# lose 15% success chance and bureaucracy mult
		add_enactment_modifier = {
			name = red_tape
		}
		discord_impact_execute = {
			OPTION = 2
		}
	}
	option = {
		# secret police will keep them in line
		name = bureaucracy.1.c
		trigger = {
			has_law = law_type:law_secret_police
		}
		# lose 10% success chance
		add_enactment_modifier = {
			name = red_tape_reduced
		}
		discord_impact_execute = {
			OPTION = 3
		}
	}
	option = {
		# hire new bureaucrats
		name = bureaucracy.1.e
		trigger = {
			enactment_setback_count < 2
		}
		highlighted_option = yes
		add_enactment_setback = 1
		add_enactment_modifier = {
			name = modifier_training_bureaucrat_replacements
		}
		discord_impact_execute = {
			OPTION = 4
		}
	}
}

# Advance event - Meritocracy
bureaucracy.2 = {
	type = country_event
	title = bureaucracy.2.t
	desc = bureaucracy.2.d
	flavor = bureaucracy.2.f
	category = enactment
	event_image = {
		video = "africa_leader_arguing"
	}
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	duration = 3
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		has_law = law_type:law_hereditary_bureaucrats
		OR = {
			is_enacting_law = law_type:law_appointed_bureaucrats
			is_enacting_law = law_type:law_elected_bureaucrats
		}
		NOT = {
			has_modifier = meritocracy
		}
	}
	immediate = {
		currently_enacting_law = {
			save_scope_as = current_law_scope
		}
		if = {
			limit = {
				is_enacting_law = law_type:law_appointed_bureaucrats
			}
			ig:ig_intelligentsia = {
				save_scope_as = meritocracy_ig
			}
		}
		if = {
			limit = {
				is_enacting_law = law_type:law_elected_bureaucrats
			}
			ig:ig_petty_bourgeoisie = {
				save_scope_as = meritocracy_ig
			}
		}
		ig:ig_landowners = {
			save_scope_as = bureaucrat_class
		}
		# Added by Babylon Discord
		# Option 1
		discord_impact_load = {
			OPTION = 1
			VALUE = 0
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 1
			CHANCE = 20
			IG = scope:meritocracy_ig
		}
		# Option 2
		discord_impact_load = {
			OPTION = 2
			VALUE = 0
		}
		discord_impact_modifier_approval_x_ig = {
			OPTION = 2
			APPROVAL_ADD = -2 # Actually -10% pol str. for the current bureaucrats, gets converted to -2 approval
			IG = scope:bureaucrat_class
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 2
			CHANCE = 10 # In favour of new bureaucrats
			IG = scope:meritocracy_ig
		}
		# Option 3
		discord_impact_load = {
			OPTION = 3
			VALUE = 0
		}
		discord_impact_modifier_approval_x_ig = {
			OPTION = 3
			APPROVAL_ADD = 2 # A +10% pol str. modifier for the new bureaucrats gets converted to 2 approval
			IG = scope:meritocracy_ig
		}
		discord_impact_modifier_enactment_chance_x_ig = {
			OPTION = 3
			CHANCE = 10 # 10% chance in favour of new bureaucrats
			IG = scope:meritocracy_ig
		}
		# Exit added by Babylon discord
	}
	cancellation_trigger = {
		NOT = {
			currently_enacting_law = scope:current_law_scope
		}
	}
	option = {
		# use this to pass the law
		name = bureaucracy.2.a
		default_option = yes
		# enactment success
		add_enactment_modifier = {
			name = meritocracy
			multiplier = 2
		}
		discord_impact_execute = {
			OPTION = 1
		}
	}
	option = {
		# use this to disempower landowners
		name = bureaucracy.2.b
		# less polstr
		scope:bureaucrat_class = {
			add_modifier = {
				name = meritocracy_ig
				months = short_modifier_time
				multiplier = -1
			}
		}
		# enactment success
		add_enactment_modifier = {
			name = meritocracy
		}
		discord_impact_execute = {
			OPTION = 2
		}
	}
	option = {
		# use this to empower new bureaucrat class
		name = bureaucracy.2.c
		# less polstr
		scope:meritocracy_ig = {
			add_modifier = {
				name = meritocracy_ig
				months = short_modifier_time
			}
		}
		# enactment success
		add_enactment_modifier = {
			name = meritocracy
		}
		discord_impact_execute = {
			OPTION = 3
		}
	}
}

# Debate event - The Bureaucratic Struggle
bureaucracy.3 = {
	type = country_event
	title = bureaucracy.3.t
	desc = bureaucracy.3.d
	flavor = bureaucracy.3.f
	category = enactment
	event_image = {
		video = "unspecific_politicians_arguing"
	}
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	duration = 3
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		OR = {
			is_enacting_law = law_type:law_appointed_bureaucrats
			is_enacting_law = law_type:law_elected_bureaucrats
			is_enacting_law = law_type:law_hereditary_bureaucrats
		}
		NOR = {
			has_modifier = good_and_fast
			has_modifier = good_and_cheap
			has_modifier = cheap_and_fast
		}
	}
	immediate = {
		currently_enacting_law = {
			save_scope_as = current_law_scope
		}
	}
	cancellation_trigger = {
		NOT = {
			currently_enacting_law = scope:current_law_scope
		}
	}
	option = {
		# good and fast
		name = bureaucracy.3.a
		default_option = yes
		add_enactment_modifier = {
			name = good_and_fast
		}
	}
	option = {
		# good and cheap
		name = bureaucracy.3.b
		add_enactment_modifier = {
			name = good_and_cheap
		}
	}
	option = {
		# cheap and fast
		name = bureaucracy.3.c
		add_enactment_modifier = {
			name = cheap_and_fast
		}
	}
}
