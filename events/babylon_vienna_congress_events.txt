namespace = babylon_vienna_congress
babylon_vienna_congress.1 = {
	type = country_event
	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	title = babylon_vienna_congress.1.t
	desc = babylon_vienna_congress.1.d
	flavor = babylon_vienna_congress.1.f
	duration = 3
	immediate = {
		global_var:babylon_vienna_congress_session_initiator = {
			save_scope_as = initiator_scope
		}
		global_var:babylon_vienna_congress_session_target = {
			save_scope_as = target_scope
		}
		global_var:babylon_vienna_congress_session_target_state = {
			save_scope_as = target_state_scope
		}
		if = {
			limit = {
				has_global_highest_gdp = yes
				# The effects of the congress should only take place ONCE
			}
			if = {
				limit = {
					global_var:babylon_vienna_congress_session_type = 1
					# Denouncement
				}
				denounce_target = {
					TARGET = scope:target_scope
				}
			}
			if = {
				limit = {
					global_var:babylon_vienna_congress_session_type = 2
					# State claim
				}
				state_claim_target = {
					TARGET = scope:target_state_scope
				}
			}
			if = {
				limit = {
					global_var:babylon_vienna_congress_session_type = 3
					# Embargo
				}
				embargo_target = {
					TARGET = scope:target_scope
				}
			}
			if = {
				limit = {
					global_var:babylon_vienna_congress_session_type = 4
					# Recognition
				}
				recognise_target = {
					TARGET = scope:target_scope
				}
			}
		}
		remove_variable ?= conference_member
		remove_variable ?= congress_proposal_type
	}
	option = {
		name = babylon_vienna_congress.1.a
		if = {
			limit = {
				global_var:babylon_vienna_congress_session_type = 1
				# Denouncement
			}
			custom_tooltip = following_has_happened_tt
			show_as_tooltip = {
				denounce_target = {
					TARGET = scope:target_scope
				}
			}
		}
		if = {
			limit = {
				global_var:babylon_vienna_congress_session_type = 2
				# State claim
			}
			custom_tooltip = following_has_happened_tt
			show_as_tooltip = {
				state_claim_target = {
					TARGET = scope:target_state_scope
				}
			}
		}
		if = {
			limit = {
				global_var:babylon_vienna_congress_session_type = 3
				# Embargo
			}
			custom_tooltip = following_has_happened_tt
			show_as_tooltip = {
				embargo_target = {
					TARGET = scope:target_scope
				}
			}
		}
		if = {
			limit = {
				global_var:babylon_vienna_congress_session_type = 4
				# Recognition
			}
			custom_tooltip = following_has_happened_tt
			show_as_tooltip = {
				recognise_target = {
					TARGET = scope:target_scope
				}
			}
		}
	}
}
