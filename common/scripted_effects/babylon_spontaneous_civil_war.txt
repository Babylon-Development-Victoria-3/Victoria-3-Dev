instant_civil_war = {
	random_scope_state = {
		limit = {
			is_capital = no
			is_incorporated = yes
		}
		set_variable = dynamic_country_cede
	}
	every_scope_state = {
		limit = {
			is_capital = no
			is_incorporated = yes
			NOT = {
				has_variable = dynamic_country_cede
			}
			any_neighbouring_state = {
				is_incorporated = yes
				has_variable = dynamic_country_cede
			}
		}
		random = {
			chance = $STREMGTH$
			set_variable = dynamic_country_cede
		}
	}
	every_scope_state = {
		limit = {
			is_capital = no
			is_incorporated = yes
			NOT = {
				has_variable = dynamic_country_cede
			}
			any_neighbouring_state = {
				is_incorporated = yes
				has_variable = dynamic_country_cede
			}
		}
		random = {
			chance = $STREMGTH$
			set_variable = dynamic_country_cede
		}
	}
	every_scope_state = {
		limit = {
			is_capital = no
			is_incorporated = yes
			NOT = {
				has_variable = dynamic_country_cede
			}
			any_neighbouring_state = {
				is_incorporated = yes
				has_variable = dynamic_country_cede
			}
		}
		random = {
			chance = $STREMGTH$
			set_variable = dynamic_country_cede
		}
	}
	set_variable = is_ceding_dynamic_country_states
	create_dynamic_country = {
		origin = root
		cede_state_trigger = {
			owner = {
				has_variable = is_ceding_dynamic_country_states
			}
			has_variable = dynamic_country_cede
		}
		color = {
			50
			50
			50
		}
		primary_unit_color = {
			50
			50
			50
		}
		secondary_unit_color = {
			50
			50
			50
		}
		tertiary_unit_color = {
			50
			50
			50
		}
		on_created = {
			set_variable = civil_war_country
		}
	}
	remove_variable = is_ceding_dynamic_country_states
	random_country = {
		limit = {
			has_variable = civil_war_country
		}
		save_scope_as = civil_war_country
	}
	scope:civil_war_country = {
		create_diplomatic_play = {
			type = dp_revolution
			target_country = root
		}
		remove_variable = civil_war_country
		every_scope_state = {
			remove_variable = dynamic_country_cede
		}
	}
}

# Scope: imploding country
implode_country = {
	set_variable = is_discord_implosion_country
	every_scope_state = {
		limit = {
			is_capital = no
		}
		# Get a random number between 1 - 29 and references it later to get a pre-defined color (by PDX)
		save_scope_value_as = {
			name = random_color
			value = random_rgb_color_decider
		}
		save_scope_as = dynamic_country_capital
		# Try to get a pop that actually has a population in the state. Checks for 50%+ religion, 40%, 30% and then just takes whatever is there.
		if = {
			limit = {
				any_scope_pop = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.5
						}
					}
				}
			}
			random_scope_pop = {
				limit = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.5
						}
					}
				}
				religion = {
					save_scope_as = new_religion_scope
				}
				culture = {
					save_scope_as = new_culture_scope
				}
			}
		}
		else_if = {
			limit = {
				any_scope_pop = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.4
						}
					}
				}
			}
			random_scope_pop = {
				limit = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.4
						}
					}
				}
				religion = {
					save_scope_as = new_religion_scope
				}
				culture = {
					save_scope_as = new_culture_scope
				}
			}
		}
		else_if = {
			limit = {
				any_scope_pop = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.3
						}
					}
				}
			}
			random_scope_pop = {
				limit = {
					prev.state_region = {
						is_homeland = prev.culture
					}
					prev = {
						religion_percent_state = {
							target = prev.religion
							value >= 0.3
						}
					}
				}
				religion = {
					save_scope_as = new_religion_scope
				}
				culture = {
					save_scope_as = new_culture_scope
				}
			}
		}
		else = {
			random_scope_pop = {
				limit = {
					prev.state_region = {
						is_homeland = prev.culture
					}
				}
				religion = {
					save_scope_as = new_religion_scope
				}
				culture = {
					save_scope_as = new_culture_scope
				}
			}
		}
		# 29 different colors.. Couldnt find a way to make dynamic colors ._.'
		# Also where the country actually starts existing
		switch = {
			trigger = scope:random_color
			1 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = black
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			2 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = white
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			3 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = blue
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			4 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = green
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			5 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = red
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			6 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = orange
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			7 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = yellow
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			8 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = purple
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			9 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = beige
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			10 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = peach
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			11 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = brown
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			12 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = pink
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			13 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = saffron
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			14 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = grey
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			15 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = tan
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			16 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = azure
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			17 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = pearl
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			18 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = teal
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			19 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = blue_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			20 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = green_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			21 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = red_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			22 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = brown_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			23 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = black_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			24 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = yellow_light
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			25 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = yellow_dark
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			26 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = red_dark
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			27 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = green_dark
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			28 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = red_faint
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			29 = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						color = grey_observer
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
			fallback = {
				root = {
					create_dynamic_country = {
						origin = root
						capital = scope:dynamic_country_capital
						tier = principality
						culture = scope:new_culture_scope
						religion = scope:new_religion_scope
						on_created = {
							trigger_event = {
								id = babylon_political_discord.2
							}
							trigger_event = {
								id = babylon_political_discord.4
								days = 3
							}
						}
					}
				}
			}
		}
	}
}
