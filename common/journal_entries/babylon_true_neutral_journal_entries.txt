je_babylon_true_neutral_status = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	complete = {
		#Complete when everyone has signed the treaty
		scope:journal_entry = {
			is_goal_complete = yes
		}
		# Start of brute force
		any_country = {
			filter = {
				root = {
					is_target_in_variable_list = {
						name = true_neutral_applicant_signee_list_unsigned
						target = prev
					}
				}
			}
			custom_tooltip = {
				text = true_neutral_x_needs_to_sign_tt
				NOT = {
					has_variable_list = true_neutral_applicants_consideration
				}
			}
			save_temporary_scope_as = unsigned_country_1
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 2
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_2
			}
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 3
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
						this = scope:unsigned_country_2
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_3
			}
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 4
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
						this = scope:unsigned_country_2
						this = scope:unsigned_country_3
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_4
			}
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 5
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
						this = scope:unsigned_country_2
						this = scope:unsigned_country_3
						this = scope:unsigned_country_4
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_5
			}
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 6
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
						this = scope:unsigned_country_2
						this = scope:unsigned_country_3
						this = scope:unsigned_country_4
						this = scope:unsigned_country_5
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_6
			}
		}
		trigger_if = {
			limit = {
				variable_list_size = {
					name = true_neutral_applicant_signee_list_unsigned
					value >= 7
				}
			}
			any_country = {
				filter = {
					root = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
					NOR = {
						this = scope:unsigned_country_1
						this = scope:unsigned_country_2
						this = scope:unsigned_country_3
						this = scope:unsigned_country_4
						this = scope:unsigned_country_5
						this = scope:unsigned_country_6
					}
				}
				custom_tooltip = {
					text = true_neutral_x_needs_to_sign_tt
					NOT = {
						has_variable_list = true_neutral_applicants_consideration
					}
				}
				save_temporary_scope_as = unsigned_country_7
			}
		}
		#End of brute force
		any_country = {
			count = 0
			filter = {
				root = {
					is_target_in_variable_list = {
						name = true_neutral_applicant_signee_list_unsigned
						target = prev
					}
				}
			}
			custom_tooltip = {
				text = true_neutral_x_needs_to_sign_tt
				root = {
					is_target_in_variable_list = {
						name = true_neutral_applicant_signee_list_unsigned
						target = prev
					}
				}
			}
		}
		any_country = {
			count = all
			filter = {
				root = {
					OR = {
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_signed
							target = prev
						}
						is_target_in_variable_list = {
							name = true_neutral_applicant_signee_list_unsigned
							target = prev
						}
					}
				}
			}
			custom_tooltip = {
				text = true_neutral_x_have_signed_tt
				root = {
					is_target_in_variable_list = {
						name = true_neutral_applicant_signee_list_signed
						target = prev
					}
				}
			}
		}
		# hidden_trigger = {
		# 	any_country = {
		# 		count = all
		# 		filter = {
		# 			root = {
		# 				is_target_in_variable_list = {
		# 					name = true_neutral_applicant_signee_list_unsigned
		# 					target = prev
		# 				}
		# 			}
		# 		}
		# 		add_to_temporary_list = temp_unsigned
		# 	}
		# }
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
		# show_unsigned_trigger = yes
	}
	current_value = {
		value = var:true_neutral_current_signers_var
	}
	goal_add_value = {
		add = var:true_neutral_required_signers_var
	}
	progressbar = yes
	on_complete = {
		activate_law = law_type:law_true_neutrality
	}
	fail = {
		is_at_war = yes
	}
	on_fail = {
		remove_variable = true_neutral_current_signers_var
		remove_variable = true_neutral_required_signers_var
		clear_variable_list = true_neutral_applicant_signee_list_signed
		clear_variable_list = true_neutral_applicant_signee_list_unsigned
		every_country = {
			limit = {
				any_in_list = {
					variable = true_neutral_applicants_consideration
					this = root
				}
			}
			remove_list_variable = {
				name = true_neutral_applicants_consideration
				target = root
			}
		}
	}
	invalid = {
		NOT = {
			has_law = law_type:law_neutral
		}
	}
	on_invalid = {
		remove_variable = true_neutral_current_signers_var
		remove_variable = true_neutral_required_signers_var
		clear_variable_list = true_neutral_applicant_signee_list_signed
		clear_variable_list = true_neutral_applicant_signee_list_unsigned
		every_country = {
			limit = {
				any_in_list = {
					variable = true_neutral_applicants_consideration
					this = root
				}
			}
			remove_list_variable = {
				name = true_neutral_applicants_consideration
				target = root
			}
		}
	}
	weight = 800
	should_be_pinned_by_default = yes
}
