je_babylon_berlin_conference_stage_1 = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	immediate = {
		set_variable = {
			name = berlin_conference_stage_1_vote
			value = 0			#To indicate no vote yet
		}
	}
	complete = {
		OR = {
			#All invitees should agree
			any_country = {
				count = all
				filter = {
					has_journal_entry = je_babylon_berlin_conference_stage_1
					has_variable = berlin_conference_stage_1_vote
				}
				custom_tooltip = {
					text = babylon_berlin_conference_stage_1_euro_gps_only_tt
					var:berlin_conference_stage_1_vote = 1					#Europe GPs only
				}
			}
			any_country = {
				count = all
				filter = {
					has_journal_entry = je_babylon_berlin_conference_stage_1
					has_variable = berlin_conference_stage_1_vote
				}
				custom_tooltip = {
					text = babylon_berlin_conference_stage_1_euro_mps_only_tt
					var:berlin_conference_stage_1_vote = 2					#Europe Major Powers only + those with african possessions
				}
			}
			any_country = {
				count = all
				filter = {
					has_journal_entry = je_babylon_berlin_conference_stage_1
					has_variable = berlin_conference_stage_1_vote
				}
				custom_tooltip = {
					text = babylon_berlin_conference_stage_1_west_gps_only_tt
					var:berlin_conference_stage_1_vote = 3					#Western hemisphere GPs only
				}
			}
			any_country = {
				count = all
				filter = {
					has_journal_entry = je_babylon_berlin_conference_stage_1
					has_variable = berlin_conference_stage_1_vote
				}
				custom_tooltip = {
					text = babylon_berlin_conference_stage_1_all_gps_tt
					var:berlin_conference_stage_1_vote = 4					#Every GP
				}
			}
		}
	}
	on_complete = {
		if = {
			#Fires only once, in the proposers journal entry
			limit = {
				has_variable = babylon_berlin_conference_proposer
				has_variable = berlin_conference_stage_1_vote
			}
			if = {
				limit = {
					var:berlin_conference_stage_1_vote = 1
				}
				#Invite euro gps to stage 2
				every_country = {
					limit = {
						country_is_in_europe = yes
						country_rank >= rank_value:great_power
						any_scope_state = {
							is_coastal = yes
						}
					}
					babylon_berlin_invite_member = yes
				}
			}
			if = {
				limit = {
					var:berlin_conference_stage_1_vote = 2
				}
				#Invite euro mps + those with possessions to stage 2
				every_country = {
					limit = {
						any_scope_state = {
							is_coastal = yes
						}
						country_is_in_africa = no
						is_subject = no
						OR = {
							is_country_type = recognized
							is_country_type = colonial
						}
						OR = {
							AND = {
								country_is_in_europe = yes
								country_rank >= rank_value:major_power
							}
							OR = {
								any_scope_state = {
									state_in_africa = yes
								}
								any_subject_or_below = {
									any_scope_state = {
										state_in_africa = yes
									}
								}
							}
						}
					}
					babylon_berlin_invite_member = yes
				}
			}
			if = {
				limit = {
					#Western GPs only
					var:berlin_conference_stage_1_vote = 3
				}
				#Invite western gps to stage 2
				every_country = {
					limit = {
						any_scope_state = {
							is_coastal = yes
						}
						OR = {
							country_is_in_europe = yes
							country_is_in_north_america = yes
							country_is_in_central_america = yes
							country_is_in_south_america = yes
						}
						country_rank >= rank_value:great_power
					}
					babylon_berlin_invite_member = yes
				}
			}
			if = {
				limit = {
					#Every GP 
					var:berlin_conference_stage_1_vote = 4
				}
				#Invite every gp to stage 2
				every_country = {
					limit = {
						any_scope_state = {
							is_coastal = yes
						}
						country_rank >= rank_value:great_power
					}
					babylon_berlin_invite_member = yes
				}
			}
			#After the if's, meaning this get fired no matter what
			#But only once, in the proposer
			#Initialise global value
			set_global_variable = {
				name = berlin_conference_total_value_for_points
				value = 0
			}
			#Start counting
			every_country = {
				limit = {
					has_journal_entry = je_babylon_berlin_conference_stage_2
				}
				change_global_variable = {
					name = berlin_conference_total_value_for_points
					add = navy_size
				}
			}
			#Give points to each invitee
			#This needs to be after, since navy_size of invitees is used
			every_country = {
				limit = {
					has_journal_entry = je_babylon_berlin_conference_stage_2
				}
				babylon_berlin_conference_calculate_points = yes
				babylon_berlin_conference_give_ai_strategic_objectives = yes
			}
			#Cleanup - for proposer only
			remove_global_variable = berlin_conference_total_value_for_points
		}
		#More cleanup
		#This is for everyone who voted
		remove_variable = berlin_conference_stage_1_vote
	}
	on_timeout = {
		remove_variable = berlin_conference_stage_1_vote
		remove_variable = babylon_berlin_conference_proposer
		remove_global_variable = babylon_berlin_conference_in_progress
		set_global_variable = babylon_berlin_conference_finished
		trigger_event = {
			id = babylon_berlin_conference.5
			days = 0
			popup = yes
		}
	}
	timeout = 356
	weight = 800
	should_be_pinned_by_default = yes
}

je_babylon_berlin_conference_stage_2 = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	immediate = {
		initialise_every_state = yes
		#Is used in the congo free state sub-round
		set_variable = berlin_conference_participant
	}
	on_timeout = {
		if = {
			#add effect to randomly distribute points
			# Only for AIs, fired at the end of the journal so countries can adapt to changes on the ground better
			limit = {
				is_ai = yes
			}
			trigger_event = {
				id = babylon_berlin_conference.10
				days = 0
			}
		}
		if = {
			#Should only fire once
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			hidden_effect = {
				trigger_event = {
					# Finish event
					id = babylon_berlin_conference.11
					days = 1
				}
			}
		}
		# And for every participant
		hidden_effect = {
			trigger_event = {
				# Cleanup event
				id = babylon_berlin_conference.9
				days = 7
			}
		}
	}
	timeout = 356
	weight = 800
	should_be_pinned_by_default = yes
}

je_babylon_egyptian_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = egypt_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = egyptian_free_state_candidate_1
			}
			save_scope_as = egyptian_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = egyptian_free_state_candidate_2
			}
			save_scope_as = egyptian_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = egyptian_free_state_candidate_3
			}
			save_scope_as = egyptian_free_state_candidate_3
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:NFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:NFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_egyptian_free_state_owner
					has_variable = egypt_free_state_vote
				}
				hidden_trigger = {
					var:egypt_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_egypt_free_state_1_tt
					subject = scope:egyptian_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_egyptian_free_state_owner
					has_variable = egypt_free_state_vote
				}
				hidden_trigger = {
					var:egypt_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_egypt_free_state_2_tt
					subject = scope:egyptian_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_egyptian_free_state_owner
					has_variable = egypt_free_state_vote
				}
				hidden_trigger = {
					var:egypt_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_egypt_free_state_3_tt
					subject = scope:egyptian_free_state_candidate_3
				}
			}
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = egypt_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:egyptian_free_state_candidate_1 = {
				remove_variable = egyptian_free_state_candidate_1
			}
			scope:egyptian_free_state_candidate_2 = {
				remove_variable = egyptian_free_state_candidate_2
			}
			scope:egyptian_free_state_candidate_3 = {
				remove_variable = egyptian_free_state_candidate_3
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_egyptian_free_state_owner
							has_variable = egypt_free_state_vote
						}
						hidden_trigger = {
							var:egypt_free_state_vote = 1
						}
					}
				}
				scope:egyptian_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:NFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_egyptian_free_state_owner
							has_variable = egypt_free_state_vote
						}
						hidden_trigger = {
							var:egypt_free_state_vote = 2
						}
					}
				}
				scope:egyptian_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:NFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_egyptian_free_state_owner
							has_variable = egypt_free_state_vote
						}
						hidden_trigger = {
							var:egypt_free_state_vote = 3
						}
					}
				}
				scope:egyptian_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:NFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = egypt_free_state_vote
	}
}

je_babylon_ethiopia_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = ethiopia_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = ethiopia_free_state_candidate_1
			}
			save_scope_as = ethiopia_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = ethiopia_free_state_candidate_2
			}
			save_scope_as = ethiopia_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = ethiopia_free_state_candidate_3
			}
			save_scope_as = ethiopia_free_state_candidate_3
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:EFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:EFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_ethiopia_free_state_owner
					has_variable = ethiopia_free_state_vote
				}
				hidden_trigger = {
					var:ethiopia_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_ethiopia_free_state_1_tt
					subject = scope:ethiopia_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_ethiopia_free_state_owner
					has_variable = ethiopia_free_state_vote
				}
				hidden_trigger = {
					var:ethiopia_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_ethiopia_free_state_2_tt
					subject = scope:ethiopia_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_ethiopia_free_state_owner
					has_variable = ethiopia_free_state_vote
				}
				hidden_trigger = {
					var:ethiopia_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_ethiopia_free_state_3_tt
					subject = scope:ethiopia_free_state_candidate_3
				}
			}
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = ethiopia_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:ethiopia_free_state_candidate_1 = {
				remove_variable = ethiopia_free_state_candidate_1
			}
			scope:ethiopia_free_state_candidate_2 = {
				remove_variable = ethiopia_free_state_candidate_2
			}
			scope:ethiopia_free_state_candidate_3 = {
				remove_variable = ethiopia_free_state_candidate_3
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_ethiopia_free_state_owner
							has_variable = ethiopia_free_state_vote
						}
						hidden_trigger = {
							var:ethiopia_free_state_vote = 1
						}
					}
				}
				scope:ethiopia_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:EFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_ethiopia_free_state_owner
							has_variable = ethiopia_free_state_vote
						}
						hidden_trigger = {
							var:ethiopia_free_state_vote = 2
						}
					}
				}
				scope:ethiopia_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:EFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_ethiopia_free_state_owner
							has_variable = ethiopia_free_state_vote
						}
						hidden_trigger = {
							var:ethiopia_free_state_vote = 3
						}
					}
				}
				scope:ethiopia_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:EFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = ethiopia_free_state_vote
	}
}

je_babylon_maghreb_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = maghreb_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = maghreb_free_state_candidate_1
			}
			save_scope_as = maghreb_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = maghreb_free_state_candidate_2
			}
			save_scope_as = maghreb_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = maghreb_free_state_candidate_3
			}
			save_scope_as = maghreb_free_state_candidate_3
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = maghreb_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:maghreb_free_state_candidate_1 = {
				remove_variable = maghreb_free_state_candidate_1
			}
			scope:maghreb_free_state_candidate_2 = {
				remove_variable = maghreb_free_state_candidate_2
			}
			scope:maghreb_free_state_candidate_3 = {
				remove_variable = maghreb_free_state_candidate_3
			}
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:MFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:MFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_maghreb_free_state_owner
					has_variable = maghreb_free_state_vote
				}
				hidden_trigger = {
					var:maghreb_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_maghreb_free_state_1_tt
					subject = scope:maghreb_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_maghreb_free_state_owner
					has_variable = maghreb_free_state_vote
				}
				hidden_trigger = {
					var:maghreb_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_maghreb_free_state_2_tt
					subject = scope:maghreb_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_maghreb_free_state_owner
					has_variable = maghreb_free_state_vote
				}
				hidden_trigger = {
					var:maghreb_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_maghreb_free_state_3_tt
					subject = scope:maghreb_free_state_candidate_3
				}
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_maghreb_free_state_owner
							has_variable = maghreb_free_state_vote
						}
						hidden_trigger = {
							var:maghreb_free_state_vote = 1
						}
					}
				}
				scope:maghreb_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:MFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_maghreb_free_state_owner
							has_variable = maghreb_free_state_vote
						}
						hidden_trigger = {
							var:maghreb_free_state_vote = 2
						}
					}
				}
				scope:maghreb_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:MFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_maghreb_free_state_owner
							has_variable = maghreb_free_state_vote
						}
						hidden_trigger = {
							var:maghreb_free_state_vote = 3
						}
					}
				}
				scope:maghreb_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:MFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = maghreb_free_state_vote
	}
}

je_babylon_senegal_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = senegal_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = senegal_free_state_candidate_1
			}
			save_scope_as = senegal_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = senegal_free_state_candidate_2
			}
			save_scope_as = senegal_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = senegal_free_state_candidate_3
			}
			save_scope_as = senegal_free_state_candidate_3
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = senegal_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:senegal_free_state_candidate_1 = {
				remove_variable = senegal_free_state_candidate_1
			}
			scope:senegal_free_state_candidate_2 = {
				remove_variable = senegal_free_state_candidate_2
			}
			scope:senegal_free_state_candidate_3 = {
				remove_variable = senegal_free_state_candidate_3
			}
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:SFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:SFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_senegal_free_state_owner
					has_variable = senegal_free_state_vote
				}
				hidden_trigger = {
					var:senegal_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_senegal_free_state_1_tt
					subject = scope:senegal_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_senegal_free_state_owner
					has_variable = senegal_free_state_vote
				}
				hidden_trigger = {
					var:senegal_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_senegal_free_state_2_tt
					subject = scope:senegal_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_senegal_free_state_owner
					has_variable = senegal_free_state_vote
				}
				hidden_trigger = {
					var:senegal_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_senegal_free_state_3_tt
					subject = scope:senegal_free_state_candidate_3
				}
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_senegal_free_state_owner
							has_variable = senegal_free_state_vote
						}
						hidden_trigger = {
							var:senegal_free_state_vote = 1
						}
					}
				}
				scope:senegal_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:SFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_senegal_free_state_owner
							has_variable = senegal_free_state_vote
						}
						hidden_trigger = {
							var:senegal_free_state_vote = 2
						}
					}
				}
				scope:senegal_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:SFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_senegal_free_state_owner
							has_variable = senegal_free_state_vote
						}
						hidden_trigger = {
							var:senegal_free_state_vote = 3
						}
					}
				}
				scope:senegal_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:SFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = senegal_free_state_vote
	}
}

je_babylon_niger_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = niger_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = niger_free_state_candidate_1
			}
			save_scope_as = niger_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = niger_free_state_candidate_2
			}
			save_scope_as = niger_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = niger_free_state_candidate_3
			}
			save_scope_as = niger_free_state_candidate_3
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:IFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:IFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_niger_free_state_owner
					has_variable = niger_free_state_vote
				}
				hidden_trigger = {
					var:niger_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_niger_free_state_1_tt
					subject = scope:niger_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_niger_free_state_owner
					has_variable = niger_free_state_vote
				}
				hidden_trigger = {
					var:niger_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_niger_free_state_2_tt
					subject = scope:niger_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_niger_free_state_owner
					has_variable = niger_free_state_vote
				}
				hidden_trigger = {
					var:niger_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_niger_free_state_3_tt
					subject = scope:niger_free_state_candidate_3
				}
			}
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = niger_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:niger_free_state_candidate_1 = {
				remove_variable = niger_free_state_candidate_1
			}
			scope:niger_free_state_candidate_2 = {
				remove_variable = niger_free_state_candidate_2
			}
			scope:niger_free_state_candidate_3 = {
				remove_variable = niger_free_state_candidate_3
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_niger_free_state_owner
							has_variable = niger_free_state_vote
						}
						hidden_trigger = {
							var:niger_free_state_vote = 1
						}
					}
				}
				scope:niger_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:IFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_niger_free_state_owner
							has_variable = niger_free_state_vote
						}
						hidden_trigger = {
							var:niger_free_state_vote = 2
						}
					}
				}
				scope:niger_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:IFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_niger_free_state_owner
							has_variable = niger_free_state_vote
						}
						hidden_trigger = {
							var:niger_free_state_vote = 3
						}
					}
				}
				scope:niger_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:IFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = niger_free_state_vote
	}
}

je_babylon_congo_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = congo_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = congo_free_state_candidate_1
			}
			save_scope_as = congo_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = congo_free_state_candidate_2
			}
			save_scope_as = congo_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = congo_free_state_candidate_3
			}
			save_scope_as = congo_free_state_candidate_3
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:CFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:CFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_congo_free_state_owner
					has_variable = congo_free_state_vote
				}
				hidden_trigger = {
					var:congo_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_congo_free_state_1_tt
					subject = scope:congo_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_congo_free_state_owner
					has_variable = congo_free_state_vote
				}
				hidden_trigger = {
					var:congo_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_congo_free_state_2_tt
					subject = scope:congo_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_congo_free_state_owner
					has_variable = congo_free_state_vote
				}
				hidden_trigger = {
					var:congo_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_congo_free_state_3_tt
					subject = scope:congo_free_state_candidate_3
				}
			}
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = congo_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:congo_free_state_candidate_1 = {
				remove_variable = congo_free_state_candidate_1
			}
			scope:congo_free_state_candidate_2 = {
				remove_variable = congo_free_state_candidate_2
			}
			scope:congo_free_state_candidate_3 = {
				remove_variable = congo_free_state_candidate_3
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_congo_free_state_owner
							has_variable = congo_free_state_vote
						}
						hidden_trigger = {
							var:congo_free_state_vote = 1
						}
					}
				}
				scope:congo_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:CFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_congo_free_state_owner
							has_variable = congo_free_state_vote
						}
						hidden_trigger = {
							var:congo_free_state_vote = 2
						}
					}
				}
				scope:congo_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:CFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_congo_free_state_owner
							has_variable = congo_free_state_vote
						}
						hidden_trigger = {
							var:congo_free_state_vote = 3
						}
					}
				}
				scope:congo_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:CFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = congo_free_state_vote
	}
}

je_babylon_south_africa_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = south_africa_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = south_africa_free_state_candidate_1
			}
			save_scope_as = south_africa_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = south_africa_free_state_candidate_2
			}
			save_scope_as = south_africa_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = south_africa_free_state_candidate_3
			}
			save_scope_as = south_africa_free_state_candidate_3
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = south_africa_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:south_africa_free_state_candidate_1 = {
				remove_variable = south_africa_free_state_candidate_1
			}
			scope:south_africa_free_state_candidate_2 = {
				remove_variable = south_africa_free_state_candidate_2
			}
			scope:south_africa_free_state_candidate_3 = {
				remove_variable = south_africa_free_state_candidate_3
			}
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:OFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:OFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_south_africa_free_state_owner
					has_variable = south_africa_free_state_vote
				}
				hidden_trigger = {
					var:south_africa_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_south_africa_free_state_1_tt
					subject = scope:south_africa_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_south_africa_free_state_owner
					has_variable = south_africa_free_state_vote
				}
				hidden_trigger = {
					var:south_africa_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_south_africa_free_state_2_tt
					subject = scope:south_africa_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_south_africa_free_state_owner
					has_variable = south_africa_free_state_vote
				}
				hidden_trigger = {
					var:south_africa_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_south_africa_free_state_3_tt
					subject = scope:south_africa_free_state_candidate_3
				}
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_south_africa_free_state_owner
							has_variable = south_africa_free_state_vote
						}
						hidden_trigger = {
							var:south_africa_free_state_vote = 1
						}
					}
				}
				scope:south_africa_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:OFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_south_africa_free_state_owner
							has_variable = south_africa_free_state_vote
						}
						hidden_trigger = {
							var:south_africa_free_state_vote = 2
						}
					}
				}
				scope:south_africa_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:OFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_south_africa_free_state_owner
							has_variable = south_africa_free_state_vote
						}
						hidden_trigger = {
							var:south_africa_free_state_vote = 3
						}
					}
				}
				scope:south_africa_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:OFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = south_africa_free_state_vote
	}
}

je_babylon_zanj_free_state_owner = {
	icon = "gfx/interface/icons/alert_icons/active_peace_deal.dds"
	#Should be called in everyone with the berlin_conference_participant variable
	immediate = {
		set_variable = {
			name = zanj_free_state_vote
			value = 0
		}
		random_country = {
			limit = {
				has_variable = zanj_free_state_candidate_1
			}
			save_scope_as = zanj_free_state_candidate_1
		}
		random_country = {
			limit = {
				has_variable = zanj_free_state_candidate_2
			}
			save_scope_as = zanj_free_state_candidate_2
		}
		random_country = {
			limit = {
				has_variable = zanj_free_state_candidate_3
			}
			save_scope_as = zanj_free_state_candidate_3
		}
	}
	timeout = 365
	on_timeout = {
		remove_variable = zanj_free_state_vote
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			scope:zanj_free_state_candidate_1 = {
				remove_variable = zanj_free_state_candidate_1
			}
			scope:zanj_free_state_candidate_2 = {
				remove_variable = zanj_free_state_candidate_2
			}
			scope:zanj_free_state_candidate_3 = {
				remove_variable = zanj_free_state_candidate_3
			}
		}
	}
	complete = {
		OR = {
			hidden_trigger = {
				c:ZFS = {
					is_subject = yes
				}
			}
			hidden_trigger = {
				has_variable = babylon_berlin_conference_proposer
			}
		}
		OR = {
			c:ZFS = {
				is_subject = yes
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_zanj_free_state_owner
					has_variable = zanj_free_state_vote
				}
				hidden_trigger = {
					var:zanj_free_state_vote = 1
				}
				custom_tooltip = {
					text = voting_for_zanj_free_state_1_tt
					subject = scope:zanj_free_state_candidate_1
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_zanj_free_state_owner
					has_variable = zanj_free_state_vote
				}
				hidden_trigger = {
					var:zanj_free_state_vote = 2
				}
				custom_tooltip = {
					text = voting_for_zanj_free_state_2_tt
					subject = scope:zanj_free_state_candidate_2
				}
			}
			any_country = {
				percent > 0.55
				filter = {
					has_journal_entry = je_babylon_zanj_free_state_owner
					has_variable = zanj_free_state_vote
				}
				hidden_trigger = {
					var:zanj_free_state_vote = 3
				}
				custom_tooltip = {
					text = voting_for_zanj_free_state_3_tt
					subject = scope:zanj_free_state_candidate_3
				}
			}
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = babylon_berlin_conference_proposer
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_zanj_free_state_owner
							has_variable = zanj_free_state_vote
						}
						hidden_trigger = {
							var:zanj_free_state_vote = 1
						}
					}
				}
				scope:zanj_free_state_candidate_1 = {
					create_diplomatic_pact = {
						country = c:ZFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_zanj_free_state_owner
							has_variable = zanj_free_state_vote
						}
						hidden_trigger = {
							var:zanj_free_state_vote = 2
						}
					}
				}
				scope:zanj_free_state_candidate_2 = {
					create_diplomatic_pact = {
						country = c:ZFS
						type = personal_union
					}
				}
			}
			if = {
				limit = {
					any_country = {
						percent > 0.55
						filter = {
							has_journal_entry = je_babylon_zanj_free_state_owner
							has_variable = zanj_free_state_vote
						}
						hidden_trigger = {
							var:zanj_free_state_vote = 3
						}
					}
				}
				scope:zanj_free_state_candidate_3 = {
					create_diplomatic_pact = {
						country = c:ZFS
						type = personal_union
					}
				}
			}
		}
		remove_variable = zanj_free_state_vote
	}
}
