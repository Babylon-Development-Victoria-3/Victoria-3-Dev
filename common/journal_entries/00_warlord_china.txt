################################
######## FRAGILE UNITY #########
################################

je_warlord_china = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	immediate = {
		random_law = {
			limit = { type = law_type:law_monarchy }
			save_scope_as = monarchy_scope
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		custom_tooltip = {
			text = warlord_china_criteria
		}
	}

	fail = {
		custom_tooltip = {
			text = won_boxer_tt
			has_variable = won_boxer_rebellion
		}
		custom_tooltip = {
			text = china_recognized_tt
			has_variable = china_warlord_explosion_recognized
		}
		custom_tooltip = {
			text = china_abolished_monarchy_tt
			has_variable = china_warlord_abolished_monarchy
		}
	}

	on_complete = {
		trigger_event = { id = warlord_china_events.100 }
	}

	current_value = {
		value = var:china_warlord_explosion
	}

	goal_add_value = {
		add = 100
	}
	
	progressbar = yes

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_subject }
					is_subject = yes
				}
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 20
				}
				set_variable = china_warlord_explosion_subject
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_loans }
					taking_loans = yes
				}
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 5
				}
				set_variable = china_warlord_explosion_loans
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_default }
					in_default = yes
				}
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
				set_variable = china_warlord_explosion_default
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_recognized }
					country_rank != rank_value:unrecognized_power
					country_rank != rank_value:unrecognized_major_power
					country_rank != rank_value:unrecognized_regional_power
				}
				set_variable = china_warlord_explosion_recognized
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 20
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_abolished_monarchy }
					NOT = { has_law = law_type:law_monarchy }
				}
				set_variable = china_abolished_monarchy
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 20
				}
				if = {
					limit = {
						NOT = { has_variable = china_han_empire }
					}
					trigger_event = { id = boxer_rebellion_events.4 days = 0 popup = yes }
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_xinjiang }
					NOT = {
						c:XIN = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_xinjiang
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_xinjiang
					c:XIN = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_xinjiang
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_mongol }
					NOT = {
						c:MGL = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_mongol
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_mongol
					c:MGL = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_mongol
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_manchuria }
					NOT = {
						c:MCH = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_manchuria
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_manchuria
					c:MCH = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_manchuria
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_gansu }
					NOT = {
						c:XIB = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_gansu
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_gansu
					c:XIB = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_gansu
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_tibet }
					NOT = {
						c:TIB = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_tibet
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_tibet
					c:TIB = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_tibet
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_sichuan }
					NOT = {
						c:SIH = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_sichuan
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_sichuan
					c:SIH = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_sichuan
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_huguang }
					NOT = {
						c:HNA = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_huguang
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_huguang
					c:HNA = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_huguang
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_liangguang }
					NOT = {
						c:YUE = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_liangguang
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 10
				}
			}
			if = {
				limit = {
					has_variable = china_warlord_explosion_liangguang
					c:YUE = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_liangguang
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 10
				}
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_formosa }
					NOT = {
						c:FRS = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_formosa
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 5
				}
			}
			
			if = {
				limit = {
					has_variable = china_warlord_explosion_formosa
					c:FRS = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_formosa
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 5
				}
			}
			
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_joseon }
					NOT = {
						c:KOR = {
							is_subject_of = ROOT
						}
					}
				}
				set_variable = china_warlord_explosion_joseon
				post_notification = warlord_china_explosion_point_add
				change_variable = {
					name = china_warlord_explosion
					add = 5
				}
			}
			
			if = {
				limit = {
					has_variable = china_warlord_explosion_joseon
					c:KOR = {
						is_subject_of = ROOT
					}
				}
				remove_variable = china_warlord_explosion_joseon
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 5
				}
			}
							
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_manchu_homelands }
					OR = {
						AND = {
							c:MCH = {
								is_subject_of = ROOT
								
								owns_entire_state_region = STATE_OUTER_MANCHURIA
								owns_entire_state_region = STATE_SOUTHERN_MANCHURIA
								owns_entire_state_region = STATE_NORTHERN_MANCHURIA
								owns_entire_state_region = STATE_TRANS_BAIKAL
							}
						}
						AND = {
							owns_entire_state_region = STATE_OUTER_MANCHURIA
							owns_entire_state_region = STATE_SOUTHERN_MANCHURIA
							owns_entire_state_region = STATE_NORTHERN_MANCHURIA
							owns_entire_state_region = STATE_TRANS_BAIKAL
						}
					}
				}
				set_variable = china_warlord_explosion_manchu_homelands
				post_notification = warlord_china_explosion_point_remove
				change_variable = {
					name = china_warlord_explosion
					subtract = 5
				}
			}
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}
