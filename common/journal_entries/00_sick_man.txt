je_sick_man_main = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	on_complete = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.2
		}
	}
	timeout = 17885
	on_timeout = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.3
		}
	}
	current_value = {
		value = var:sick_man_var
	}
	on_monthly_pulse = {
		random_events = {
			10 = sick_man.4
		}
	}
	goal_add_value = {
		add = 8
	}
	progressbar = yes
	weight = 10000
	should_be_pinned_by_default = yes
}

# Bureaucractic Reform
je_sick_man_bureaucracy = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	complete = {
		NOR = {
			has_law = law_type:law_hereditary_bureaucrats
			has_law = law_type:law_land_based_taxation
			has_law = law_type:law_consumption_based_taxation
		}
		bureaucracy >= 0
		approaching_bureaucracy_shortage = no
	}
	on_complete = {
		set_variable = completed_sick_man_bureaucracy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_modifier = {
			name = sick_man_tanzimat_bureaucracy
			years = 10
		}	
		remove_modifier = outmoded_bureaucracy
	}
	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = tanzimat_events.9			# Land registration resisted
		}
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
}

# Economic Reform
je_sick_man_economy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	complete = {
		in_default = no
		any_scope_state = {
			is_incorporated = yes
			has_building = building_urban_center
			percent >= 0.6
		}
	}
	on_complete = {
		set_variable = completed_sick_man_economy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_modifier = {
			name = sick_man_tanzimat_economy
			years = 10
		}	
		remove_modifier = stagnant_economy
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
}

# Army Reform
je_sick_man_army = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	complete = {
		army_size >= 150
		NOT = {
			any_scope_building = {
				is_building_type = building_barracks
				OR = {
					building_has_goods_shortage = yes
					has_active_production_method = pm_no_organization
					# TO DO: Hook this whole part into Formation composition rather than old barracks PM 
					# has_active_production_method = pm_no_artillery
					# has_active_production_method = pm_cannon_artillery
				}
			}
		}
	}
	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_modifier = {
			name = sick_man_tanzimat_army
			years = 10
			is_decaying = yes
		}	
		remove_modifier = janissary_legacy
	}
	on_monthly_pulse = {
		events = {
			tanzimat_events.10			# Tanzimat Draft Question
		}
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
}

# Naval Reform
je_sick_man_navy = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	complete = {
		navy_size >= 30
		NOT = {
			any_scope_building = {
				is_building_type = building_barracks
				OR = {
					building_has_goods_shortage = yes
					has_active_production_method = pm_no_organization
					# TO DO: Hook this whole part into Formation composition rather than old barracks PM 
					# has_active_production_method = pm_no_artillery
					# has_active_production_method = pm_cannon_artillery
				}
			}
		}
	}
	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_modifier = {
			name = sick_man_tanzimat_navy
			years = 10
			is_decaying = yes
		}	
		remove_modifier = rampant_piracy
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
}

# Kurdish Question
je_sick_man_kurdish_liberal = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	immediate = {
		set_variable = {
			name = sick_man_kurdish_liberal_var
			value = 0
		}
	}
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_diplomatic_pact = {
			who = c:KUR
			type = protectorate
		}
		is_at_war = no
	}
	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_loyalists = {
			value = 0.20
			culture = cu:kurdish
		}
		add_radicals = {
			value = 0.05
			culture = cu:turkish
		}
		add_modifier = {
			name = ottoman_kurdish_liberal_reward
			years = 5
		}	
		c:KUR = {
			add_loyalists = {
				value = 0.30
				culture = cu:kurdish
			}
			add_modifier = {
				name = kurdish_liberal_reward
				years = 5
			}	
		}
		remove_modifier = kurdish_question
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	current_value = {
		value = var:sick_man_kurdish_liberal_var
	}
	goal_add_value = {
		add = 180
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_diplomatic_pact = {
						who = c:KUR
						type = protectorate
					}
					NOT = { has_war_with = c:KUR }
				}
				change_variable = {
					name = sick_man_kurdish_liberal_var
					add = 1
				}
			}
		}
	}
	transferable = no
	weight = 5000
	progressbar = yes
}

je_sick_man_kurdish_absolute = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	immediate = {
		set_variable = {
			name = sick_man_kurdish_absolute_var
			value = 0
		}
	}
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_diplomatic_pact = {
			who = c:KUR
			type = puppet
		}
		is_at_war = no
	}
	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_loyalists = {
			value = 0.05
			culture = cu:kurdish
		}
		add_modifier = {
			name = ottoman_kurdish_absolute_reward
			years = 5
		}	
		remove_modifier = kurdish_question
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	current_value = {
		value = var:sick_man_kurdish_absolute_var
	}
	goal_add_value = {
		add = 180
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_diplomatic_pact = {
						who = c:KUR
						type = puppet
					}
					NOT = { has_war_with = c:KUR }
				}
				change_variable = {
					name = sick_man_kurdish_absolute_var
					add = 1
				}
			}
		}
	}
	transferable = no
	weight = 5000
	progressbar = yes
}

# Nationalism
je_sick_man_separatism = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	complete = {
		trigger_if = {
			limit = {
				has_variable = absolute_tanzimat
			}
			has_law = law_type:law_faith_orders
			NOT = {
				has_law = law_type:law_no_migration_controls
			}
			institution_investment_level = {
				institution = institution_police
				value >= 2
			}
			has_diplomatic_pact = {
				who = c:SER
				type = dominion
			}
			has_diplomatic_pact = {
				who = c:WAL
				type = dominion
			}
			has_diplomatic_pact = {
				who = c:MOL
				type = dominion
			}
		}
		trigger_if = {
			limit = {
				has_variable = liberal_tanzimat
			}
			scope:journal_entry = {
				is_goal_complete = yes
			}
			highest_secession_progress < 0.75
			any_scope_state = {
				turmoil <= 0.6
			}
			has_law = law_type:law_no_migration_controls
			has_law = law_type:law_cultural_exclusion
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = liberal_tanzimat
			}
			add_loyalists = {
				value = 0.05
				religion = rel:catholic
			}
			add_loyalists = {
				value = 0.05
				religion = rel:orthodox
			}
			add_radicals = {
				value = 0.05
				religion = rel:sunni
			}
			add_modifier = {
				name = balkan_liberal_peace
				years = 5
			}
		}
		else = {
			add_modifier = {
				name = balkan_absolute_peace
				years = 10
			}
			s:STATE_PELOPONNESE = {
				add_claim = ROOT
			}
			s:STATE_ATTICA = {
				add_claim = ROOT
			}
			s:STATE_WEST_AEGEAN_ISLANDS = {
				add_claim = ROOT
			}
			s:STATE_IONIAN_ISLANDS = {
				add_claim = ROOT
			}
		}
		set_variable = completed_separatism_sick_man_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		remove_modifier = balkan_disarray
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = liberal_tanzimat
					highest_secession_progress < 0.75
					any_scope_state = {
						turmoil <= 0.6
					}
					has_law = law_type:law_no_migration_controls
					has_law = law_type:law_cultural_exclusion
				}
				change_variable = {
					name = sick_man_separatist_var
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			10 = tanzimat_events.5			# Paranoia Event
		}
	}
	current_value = {
		value = var:sick_man_separatist_var
	}
	goal_add_value = {
		add = 120
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
	progressbar = yes
}

# Literacy and Universities
je_sick_man_education = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy > 0.9
			level >= 5
		}
		trigger_if = {
			limit = {
				has_variable = liberal_tanzimat
			}
			OR = {
				has_law = law_type:law_private_schools
				has_law = law_type:law_public_schools
			}
		}
		trigger_if = {
			limit = {
				has_variable = absolute_tanzimat
			}
			OR = {
				has_law = law_type:law_patriot_schools
				has_law = law_type:law_religious_schools
			}
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	on_complete = {
		if = {
			limit = {
				has_variable = liberal_tanzimat
			}
			add_modifier = {
				name = sick_man_liberal_education
				years = 5
			}
		}
		else = {
			add_modifier = {
				name = sick_man_absolute_education
				years = 10
			}
		}
		set_variable = completed_sick_man_education_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}
	current_value = {
		value = root.literacy_rate
	}
	goal_add_value = {
		add = 0.15
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
	progressbar = yes
	remove_modifier = imbalanced_education
}

# Liberalism
je_sick_man_voting_liberal = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	immediate = {
		set_variable = {
			name = sick_man_voting_liberal_var
			value = 0
		}
	}
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		add_loyalists = {
			value = 0.10
			strata = poor
		}
		add_radicals = {
			value = 0.15
			strata = rich
		}
		add_modifier = {
			name = sick_man_liberal_voting
			years = 10
		}	
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	current_value = {
		value = var:sick_man_voting_liberal_var
	}
	goal_add_value = {
		add = 120
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						has_law = law_type:law_right_of_assembly
						has_law = law_type:law_protected_speech
					}
					OR = {
						has_law = law_type:law_wealth_voting
						has_law = law_type:law_census_voting
						has_law = law_type:law_universal_suffrage
					}
				}
				change_variable = {
					name = sick_man_voting_liberal_var
					add = 1
				}
			}
		}
	}
	transferable = no
	weight = 5000
	progressbar = yes
}

je_sick_man_syria = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	complete = {
		owns_entire_state_region = STATE_ALEPPO
		owns_entire_state_region = STATE_SYRIA
		owns_entire_state_region = STATE_LEBANON
		owns_entire_state_region = STATE_PALESTINE
		owns_entire_state_region = STATE_TRANSJORDAN
		owns_entire_state_region = STATE_ADANA
	}
	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		set_variable = completed_syria_je
		s:STATE_SINAI = {
			add_claim = ROOT
		}
		s:STATE_UPPER_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_MIDDLE_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_LOWER_EGYPT = {
			add_claim = ROOT
		}
		if = {
			limit = {
				OR = {
					AND = {
						exists = c:EGY
						c:EGY = {
							is_subject_of = ROOT
						}
					}
					AND = {
						owns_entire_state_region = STATE_SINAI
						owns_entire_state_region = STATE_UPPER_EGYPT
						owns_entire_state_region = STATE_MIDDLE_EGYPT
						owns_entire_state_region = STATE_LOWER_EGYPT
					}
				}
			}
			custom_tooltip = je_sick_man_advance
			change_variable = {
				name = sick_man_var
				add = 1
			}
		}
		custom_tooltip = sickman_syria_egypt
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	on_weekly_pulse = {
		events = {
			egyptian_crisis_events.1
		}
	}
	transferable = no
	weight = 5000
}

je_sick_man_egypt = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	complete = {
		OR = {
			AND = {
				exists = c:EGY
				c:EGY = {
					is_subject_of = ROOT
				}
			}
			AND = {
				owns_entire_state_region = STATE_SINAI
				owns_entire_state_region = STATE_UPPER_EGYPT
				owns_entire_state_region = STATE_MIDDLE_EGYPT
				owns_entire_state_region = STATE_LOWER_EGYPT
			}
		}
	}
	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		remove_modifier = internal_strife
	}
	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}
	transferable = no
	weight = 5000
}
