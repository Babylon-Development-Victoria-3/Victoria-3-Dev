political_discord_change_miniscule = {
	value = 1
}

political_discord_change_small = {
	value = 2
}

political_discord_change_medium = {
	value = 3
}

political_discord_change_large = {
	value = 4
}

political_discord_change_xl = {
	value = 5
}

political_discord_change_huge = {
	value = 10
}

political_discord_change_massive = {
	value = 20
}

political_discord_defensive_pact_mult = {
	value = 1.25
}

political_discord_alliance_pact_mult = {
	value = 1.5
}

political_discord_trade_pact_mult = {
	value = 1
}

political_discord_customs_union_pact_mult = {
	value = 1.1
}

political_discord_rivalry_pact_mult = {
	value = 1.5
}

babylon_discord_fetch_value = {
	value = 0	# gets through
	every_scope_diplomatic_pact = {
		limit = {
			any_participant = {
				this = scope:target_country
			}
			OR = {
				# Add each diplomatic pact considered to the list below
				is_diplomatic_action_type = defensive_pact
				is_diplomatic_action_type = alliance
				is_diplomatic_action_type = trade_agreement
				is_diplomatic_action_type = customs_union
				is_diplomatic_action_type = rivalry
			}
		}
		# multiplications + number returnal
		if = {
			limit = {
				is_diplomatic_action_type = defensive_pact
			}
			add = {
				value = babylon_discord_pact_calculation
				multiply = political_discord_defensive_pact_mult
			}
		}
		if = {
			limit = {
				is_diplomatic_action_type = alliance
			}
			add = {
				value = babylon_discord_pact_calculation
				multiply = political_discord_alliance_pact_mult
			}
		}
		if = {
			limit = {
				is_diplomatic_action_type = trade_agreement
			}
			add = {
				value = babylon_discord_pact_calculation
				multiply = political_discord_trade_pact_mult
			}
		}
		if = {
			limit = {
				is_diplomatic_action_type = customs_union
			}
			add = {
				value = babylon_discord_pact_calculation
				multiply = political_discord_customs_union_pact_mult
			}
		}
		if = {
			limit = {
				is_diplomatic_action_type = rivalry
			}
			subtract = {
				value = babylon_discord_pact_calculation
				multiply = political_discord_rivalry_pact_mult
			}
		}
	}
}

babylon_discord_character_law_calculation = {
	# scope = character
	value = 0
	save_temporary_scope_as = character_scope
	owner = {
		# scope to country
		every_law = {
			# start iterating through laws
			if = {
				limit = {
					# but
					owner = {
						# only laws the country has
						has_law = prev.type
					}
				}
				save_temporary_scope_as = law_scope
				scope:character_scope = {
					if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = strongly_disapprove
							}
						}
						add = political_discord_change_small
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = disapprove
							}
						}
						add = political_discord_change_miniscule
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = approve
							}
						}
						subtract = political_discord_change_miniscule
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = strongly_approve
							}
						}
						subtract = political_discord_change_small
					}
				}
			}
		}
	}
	if = {
		# If character is a ruler theres a multiplier of 2, he got a big influence on politics
		limit = {
			is_ruler = yes
		}
		multiply = 2
	}
	else = {
		# Else its the ig clout% + 1, e.g. 1.23x for a 23% ig
		multiply = {
			value = interest_group.ig_clout
			add = 1
		}
	}
	multiply = {
		# After that popularity is taken into account...
		# -25 popularity would be a 0.75x multiplier, people care less about him; reduced ability to influence politics
		# +50 popularity would be a 1.5x multiplier, people care more about him; increased ability to influence politics
		value = popularity
		add = 100
		divide = 100
	}
}

babylon_discord_domestic_law_calculation = {
	# character_scope = saved character
	# law_scope = saved law
	value = 0
	scope:character_scope = {
		if = {
			limit = {
				law_stance = {
					law = scope:law_scope
					value = strongly_disapprove
				}
			}
			add = political_discord_change_small
		}
		else_if = {
			limit = {
				law_stance = {
					law = scope:law_scope
					value = disapprove
				}
			}
			add = political_discord_change_miniscule
		}
		else_if = {
			limit = {
				law_stance = {
					law = scope:law_scope
					value = approve
				}
			}
			subtract = political_discord_change_miniscule
		}
		else_if = {
			limit = {
				law_stance = {
					law = scope:law_scope
					value = strongly_approve
				}
			}
			subtract = political_discord_change_small
		}
	}
	multiply = local_var:domestic_law_discord_multiplier
}

babylon_discord_interest_group_law_calculation = {
	# scope = some interest group within the country
	value = 0
	save_temporary_scope_as = ig_scope
	owner = {
		# scope to country
		every_law = {
			# start iterating through laws
			if = {
				limit = {
					# but
					owner = {
						# only laws the country has
						has_law = prev.type
					}
				}
				save_temporary_scope_as = law_scope
				scope:ig_scope = {
					if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = strongly_disapprove
							}
						}
						add = political_discord_change_small
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = disapprove
							}
						}
						add = political_discord_change_miniscule
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = approve
							}
						}
						subtract = political_discord_change_miniscule
					}
					else_if = {
						limit = {
							law_stance = {
								law = scope:law_scope.type
								value = strongly_approve
							}
						}
						subtract = political_discord_change_small
					}
				}
			}
		}
	}
	multiply = {
		value = ig_clout
		add = 1
	}
}

babylon_discord_legitimacy_offset_value = {
	# Get the legitimacy, 75 for example
	value = government_legitimacy
	# Subtract by 50, so 25 now
	subtract = 50
	# Do this and you get the value, just with the other sign (-/+)
	multiply = -1
	# A government at 0 legit. will get 50 discord
	# -||- at 50 legit. wont get any bonus, or malus
	# -||- at 100 will get -50 discord
}